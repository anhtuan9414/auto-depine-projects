!function(n){var e={};function t(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(o,i,function(e){return n[e]}.bind(null,i));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=18)}({18:function(n,e,t){"use strict";t.r(e);const o=t(2).a.production;let i,r=!1;async function a(){try{const n=await chrome.storage.local.get("kaisar_minning_token"),e=null==n?void 0:n.kaisar_minning_token;chrome.alarms.create("ping",{periodInMinutes:o.ping/60}),chrome.alarms.onAlarm.addListener(async n=>{e&&(r=!0),"ping"===n.name&&r&&(console.log("dang ping"),await fetch(o.api+"/extension/ping",{method:"POST",headers:{"Content-Type":"application/json",Authorization:decodeURIComponent(e)},body:JSON.stringify({extension:i})}))})}catch(n){console.error("Lỗi khi lấy token từ storage:",n)}}async function s(){try{const n=await chrome.storage.local.get("kaisar_minning_token"),e=null==n?void 0:n.kaisar_minning_token;console.log("stopMining: "+e),await fetch(o.api+"/mining/stop",{method:"POST",headers:{"Content-Type":"application/json",Authorization:decodeURIComponent(e)},body:JSON.stringify({extension:i})}),await fetch(o.api+"/extension/disconect",{method:"POST",headers:{"Content-Type":"application/json",Authorization:decodeURIComponent(e)},body:JSON.stringify({extension:i})})}catch(n){console.error("Lỗi khi lấy token từ storage:",n)}}async function c(){await a(),await chrome.alarms.create("ping",{periodInMinutes:o.ping/60}),console.log("startPing: ",i)}function l(){chrome.alarms.clear("ping"),console.log("stopPing: ",i)}!async function(){const n=await chrome.storage.local.get("deviceId");n&&n.hasOwnProperty("deviceId")?i=n.deviceId:(i=await crypto.randomUUID(),chrome.storage.local.set({deviceId:i}))}(),a(),chrome.runtime.onMessage.addListener((n,e,t)=>("startPing"===n.action?c():"stopPing"===n.action?l():"stopMining"===n.action&&s(),t({status:"ping ok"}),!0)),chrome.runtime.onMessage.addListener((n,e,t)=>{const o=n.value;"ping"===n.type&&(o?c():l())}),chrome.runtime.onInstalled.addListener((function(n){console.log("[chrome.runtime.onInstalled.addListener]",n),n.reason===chrome.runtime.OnInstalledReason.INSTALL&&(console.log("INSTALL"),chrome.runtime.setUninstallURL("https://kaisar.io")),n.reason===chrome.runtime.OnInstalledReason.UPDATE&&(console.log("UPDATE"),s())})),chrome.windows.onRemoved.addListener((function(n){console.log("window closed"),s()}))},2:function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));const o={development:{url:"https://stg-mining.kaisar.io",api:"https://stg-mining-api.kaisar.io",countdown:300,ping:120},staging:{url:"https://stg-mining.kaisar.io",api:"https://stg-mining-api.kaisar.io",countdown:86400,ping:120},production:{url:"https://zero.kaisar.io",api:"https://zero-api.kaisar.io",countdown:21600,ping:1800}}}});